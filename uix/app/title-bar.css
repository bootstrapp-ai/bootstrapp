.uix-title-bar {
  /* Layout */
  display: block;
  width: 100%;
  user-select: none;

  /* Draggable region (Electron/Tauri support) */
  &[draggable] {
    -webkit-app-region: drag;
  }

  /* Variants */
  &[variant="unified"] {
    --titlebar-bg: transparent;
    --titlebar-border: none;
  }

  &[variant="hidden"] {
    display: none;
  }
}

/* Title bar container */
.uix-title-bar::part(titlebar) {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--spacing-sm);
  height: 32px;
  padding: 0 var(--spacing-xs);
  background: var(--titlebar-bg, var(--color-surface));
  border-bottom: var(--titlebar-border, 1px solid var(--color-border));
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
  font-size: var(--font-size-sm);
}

/* Buttons inside should not be draggable */
.uix-title-bar::part(titlebar) button {
  -webkit-app-region: no-drag;
}

/* Left section */
.uix-title-bar::part(left) {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  min-width: 0;
  flex-shrink: 0;
}

/* Center section */
.uix-title-bar::part(center) {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-width: 0;
  overflow: hidden;
}

/* Title text */
.uix-title-bar::part(title) {
  color: var(--color-text);
  font-size: var(--font-size-sm);
  font-weight: 500;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Right section */
.uix-title-bar::part(right) {
  display: flex;
  align-items: center;
  gap: var(--spacing-xs);
  min-width: 0;
  flex-shrink: 0;
}

/* Window controls */
.uix-title-bar::part(controls) {
  display: flex;
  align-items: center;
  gap: 0;
  margin-left: var(--spacing-xs);
}

/* Control buttons - base styles shared by all three */
.uix-title-bar::part(minimize),
.uix-title-bar::part(maximize),
.uix-title-bar::part(close) {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 46px;
  height: 32px;
  padding: 0;
  background: transparent;
  border: none;
  color: var(--color-text);
  cursor: pointer;
  transition: background-color 0.15s ease;

  &:hover {
    background: var(--color-surface-light);
  }

  &:active {
    background: var(--color-surface-dark);
  }
}

.uix-title-bar::part(minimize) svg,
.uix-title-bar::part(maximize) svg,
.uix-title-bar::part(close) svg {
  opacity: 0.7;
}

.uix-title-bar::part(minimize):hover svg,
.uix-title-bar::part(maximize):hover svg,
.uix-title-bar::part(close):hover svg {
  opacity: 1;
}

/* Close button special styling */
.uix-title-bar::part(close):hover {
  background: #e81123;
  color: white;
}

.uix-title-bar::part(close):active {
  background: #c50f1f;
}

/* Slot content styling */
.uix-title-bar [slot="left"] button,
.uix-title-bar [slot="center"] button,
.uix-title-bar [slot="right"] button,
.uix-title-bar [slot="left"] [role="button"],
.uix-title-bar [slot="center"] [role="button"],
.uix-title-bar [slot="right"] [role="button"] {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: var(--spacing-xs) var(--spacing-sm);
  background: transparent;
  border: none;
  color: var(--color-text);
  font-size: var(--font-size-sm);
  cursor: pointer;
  border-radius: var(--radius-sm);
  transition: background-color 0.15s ease;

  &:hover {
    background: var(--color-surface-light);
  }

  &:active {
    background: var(--color-surface-dark);
  }
}

.uix-title-bar [slot="left"] img,
.uix-title-bar [slot="center"] img,
.uix-title-bar [slot="right"] img {
  flex-shrink: 0;
}

/* macOS-style controls (left-aligned) */
.uix-title-bar[data-platform="mac"]::part(titlebar) {
  padding-left: 80px; /* Space for macOS traffic lights */
}

.uix-title-bar[data-platform="mac"]::part(controls) {
  order: -1; /* Move to start */
  margin-left: 0;
  margin-right: auto;
  gap: 8px;
}

.uix-title-bar[data-platform="mac"]::part(close),
.uix-title-bar[data-platform="mac"]::part(minimize),
.uix-title-bar[data-platform="mac"]::part(maximize) {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  padding: 0;
}

.uix-title-bar[data-platform="mac"]::part(close) {
  background: #ff5f57;
  border: 1px solid #e0443e;

  &:hover {
    background: #ff5f57;
    filter: brightness(1.1);
  }
}

.uix-title-bar[data-platform="mac"]::part(minimize) {
  background: #ffbd2e;
  border: 1px solid #dea123;

  &:hover {
    background: #ffbd2e;
    filter: brightness(1.1);
  }
}

.uix-title-bar[data-platform="mac"]::part(maximize) {
  background: #28ca42;
  border: 1px solid #24a73e;

  &:hover {
    background: #28ca42;
    filter: brightness(1.1);
  }
}

.uix-title-bar[data-platform="mac"]::part(close) svg,
.uix-title-bar[data-platform="mac"]::part(minimize) svg,
.uix-title-bar[data-platform="mac"]::part(maximize) svg {
  display: none;
}

/* Responsive - hide on mobile */
@media (max-width: 767px) {
  .uix-title-bar::part(titlebar) {
    display: none;
  }
}
