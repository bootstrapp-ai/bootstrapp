:where(.uix-button, uix-button) {
  /* --- 1. Layout & Core Props --- */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--button-width, fit-content);
  white-space: nowrap;
  box-sizing: border-box;

  &::part(anchor) {
    border: 0;
    background: transparent;
    color: var(--button-color, var(--text-color, inherit));
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    padding: var(--button-padding-y, 0.5rem) var(--button-padding-x, 1rem);
  }

  /* Typography */
  font-family: inherit;
  font-weight: var(--button-font-weight, 700);
  font-size: var(--button-font-size, 0.875rem);
  line-height: var(--button-line-height, 1.5);
  text-align: center;
  gap: var(--button-gap, 0.5rem);

  /* Appearance */
  border-radius: var(--button-border-radius, var(--radius-md, 0.375rem));
  border: var(--button-border-size, 0) solid
    var(--button-border-color, transparent);
  box-shadow: var(--button-shadow, none);
  text-decoration: none;
  padding: var(--spacing-sm, 0.5rem) var(--spacing-md, 0.75rem);
  cursor: pointer;
  text-transform: var(--button-text-transform, none);
  transition: var(
    --button-transition,
    transform 0.1s ease-in-out,
    background-color 0.2s ease-in-out,
    border-color 0.2s ease-in-out,
    box-shadow 0.15s ease-in-out,
    color 0.2s ease-in-out
  );
  background: transparent;
  user-select: none;
  background-color: var(--button-background, #000);
  color: var(--button-color, #fff);

  /* --- 2. Interactive States --- */
  &:focus-visible {
    outline: 2px solid var(--color-primary-dark);
    outline-offset: 2px;
  }

  /* Generic Hover/Active (overridable by variants) */
  &:not([disabled]):not([aria-disabled="true"]):hover {
    background-color: var(--button-hover-background, var(--color-primary-dark));
    border-color: var(
      --button-hover-border-color,
      var(--button-border-color, transparent)
    );
    color: var(--button-hover-color, var(--button-color));
    box-shadow: var(--button-hover-shadow, var(--button-shadow, none));
    transform: translate(
      var(--button-hover-translate-x, 0),
      var(--button-hover-translate-y, 0)
    );
  }

  &:not([disabled]):not([aria-disabled="true"]):active {
    background-color: var(
      --button-active-background,
      var(--color-primary-darker)
    );
    box-shadow: var(--button-active-shadow, var(--button-shadow, none));
    transform: translate(
        var(--button-active-translate-x, 0),
        var(--button-active-translate-y, 0)
      )
      scale(0.97);
  }

  &:not([variant], [primary], [secondary], [danger], [success], [warning]) {
    --button-color: #fff;
    --button-background: #000;
    --button-border-color: #000;
    --button-hover-background: #222;
    --button-active-background: #222;
  }

  &[primary],
  &[variant="primary"] {
    --button-background: var(--color-primary);
    --button-border-color: var(--color-primary);
    --button-hover-background: var(--color-primary-dark);
    --button-active-background: var(--color-primary-darker);
  }

  &[secondary],
  &[variant="secondary"] {
    --button-background: var(--color-secondary);
    --button-border-color: var(--color-secondary);
    --button-hover-background: var(--color-secondary-dark);
    --button-active-background: var(--color-secondary-darker);
  }

  &[danger],
  &[variant="danger"] {
    --button-background: var(--color-danger);
    --button-border-color: var(--color-danger);
    --button-hover-background: var(--color-danger-dark);
    --button-active-background: var(--color-danger-darker);
  }

  &[success],
  &[variant="success"] {
    --button-background: var(--color-success);
    --button-border-color: var(--color-success);
    --button-hover-background: var(--color-success-dark);
    --button-active-background: var(--color-success-darker);
  }

  &[warning],
  &[variant="warning"] {
    --button-background: var(--color-warning);
    --button-border-color: var(--color-warning);
    --button-hover-background: var(--color-warning-dark);
    --button-active-background: var(--color-warning-darker);
  }

  &[bordered] {
    --button-border-size: 1px;
  }

  /* B. OUTLINE VARIANTS */
  &[outline] {
    --button-background: transparent;
    --button-border-size: 1px;
    --button-color: var(--text-color);
    --button-hover-color: var(--color-surface-lighter);

    &[primary] {
      --button-border-color: var(--color-primary-dark);
      --button-hover-background: var(--color-primary);
      --button-hover-border-color: var(--color-primary);
    }

    &[secondary] {
      --button-border-color: var(--color-secondary-dark);
      --button-hover-background: var(--color-secondary);
      --button-hover-border-color: var(--color-secondary);
    }

    &[danger] {
      --button-border-color: var(--color-danger-dark);
      --button-hover-background: var(--color-danger);
      --button-hover-border-color: var(--color-danger);
    }

    &[success] {
      --button-border-color: var(--color-success-dark);
      --button-hover-background: var(--color-success);
      --button-hover-border-color: var(--color-success);
    }
  }

  /* C. GHOST VARIANTS */
  &[ghost] {
    --button-background: transparent;
    --button-border-color: transparent;
    --button-color: var(--text-color);
    --button-hover-background: var(--color-surface-light);
    --button-hover-color: var(--text-color);

    &[primary] {
      --button-hover-background: color-mix(
        in srgb,
        var(--color-primary),
        transparent 85%
      );
      --button-hover-color: var(--color-primary-darker);
    }

    &[secondary] {
      --button-hover-background: color-mix(
        in srgb,
        var(--color-secondary),
        transparent 85%
      );
      --button-hover-color: var(--color-secondary-darker);
    }

    &[danger] {
      --button-hover-background: color-mix(
        in srgb,
        var(--color-danger),
        transparent 85%
      );
      --button-hover-color: var(--color-danger-darker);
    }

    &[success] {
      --button-hover-background: color-mix(
        in srgb,
        var(--color-success),
        transparent 85%
      );
      --button-hover-color: var(--color-success-darker);
    }
  }

  /* --- 4. Sizing --- */
  &[size="xs"] {
    --button-padding-y: 0.2rem;
    --button-padding-x: 0.5rem;
    --button-font-size: 0.6rem;
    --button-line-height: 1rem;
    --button-gap: 0.25rem;
  }

  &[size="sm"] {
    --button-padding-y: 0.3rem;
    --button-padding-x: 0.8rem;
    --button-font-size: 0.8rem;
    --button-line-height: 1.25rem;
    --button-gap: 0.375rem;
  }

  &[size="md"] {
    --button-padding-y: 0.4rem;
    --button-padding-x: 1.25rem;
    --button-font-size: 0.9rem;
    --button-line-height: 1.5rem;
    --button-gap: 0.5rem;
  }

  &[size="lg"] {
    --button-padding-y: 0.5rem;
    --button-padding-x: 1.5rem;
    --button-font-size: 1.1rem;
    --button-line-height: 1.75rem;
    --button-gap: 0.625rem;
  }

  &[size="xl"] {
    --button-padding-y: 0.625rem;
    --button-padding-x: 2rem;
    --button-font-size: 1.25rem;
    --button-line-height: 2rem;
    --button-gap: 0.75rem;
  }

  /* Full width */
  &[w-full],
  &[wfull] {
    width: 100%;
    display: flex;
  }
}
