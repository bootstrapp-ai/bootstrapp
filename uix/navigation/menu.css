/**
 * Menu Component Styles
 */

:where(.uix-menu, uix-menu) {
  display: flex;
  flex-direction: column;
  list-style: none;
  margin: 0;
  padding: 0.25rem 0;
  box-shadow: var(--menu-shadow, 0 2px 8px rgba(0, 0, 0, 0.1));

  &[size="sm"] {
    --menu-item-font-size: var(--text-sm, 0.875rem);
    --menu-item-padding: 0.375rem 0.75rem;
    --menu-item-gap: 0.5rem;
  }

  &[size="md"] {
    --menu-item-font-size: var(--text-sm, 0.875rem);
    --menu-item-padding: 0.5rem 0.75rem;
    --menu-item-gap: 0.75rem;
  }

  &[size="lg"] {
    --menu-item-font-size: var(--text-base, 1rem);
    --menu-item-padding: 0.625rem 1rem;
    --menu-item-gap: 1rem;
  }

  /* Menu Items */
  > li[role="menuitem"] {
    list-style: none;
    margin: 0;
    padding: 0;

    > a,
    > button {
      display: block;
      width: 100%;
      padding: var(--menu-item-padding, 0.5rem 0.75rem);
      font-size: var(--menu-item-font-size, var(--text-sm, 0.875rem));
      color: var(--dropdown-color, var(--text-color, default));
      text-decoration: none;
      background-color: transparent;
      border: none;
      cursor: pointer;
      transition:
        background-color 0.15s ease,
        color 0.15s ease;
      text-align: left;
      white-space: nowrap;

      &:hover {
        background-color: var(--color-primary, #fabd2f);
        color: var(--color-inverse, #282828);
      }

      &:active {
        background-color: var(--color-primary, #fabd2f);
        color: var(--color-inverse, #282828);
      }
    }
  }

  > li[role="separator"] {
    height: 1px;
    background-color: var(--panel-border, var(--dropdown-separator, #504945));
    margin: 0.25rem 0;
    padding: 0;
  }

  /* Variant: Bordered */
  &[variant="bordered"]::part(container) {
    border-width: 2px;
  }

  /* Variant: Compact */
  &[variant="compact"] {
    --menu-item-padding: 0.375rem 0.5rem;
  }

  &:not([rounded])::part(container) {
    border-radius: 0;
  }

  &:not([bordered])::part(container) {
    border: none;
  }

  /* =============================================
     VARIANT: Sidebar
     Full-width nav items, no shadow, accordion support
     ============================================= */
  &[variant="sidebar"] {
    box-shadow: none;
    background: transparent;
    padding: var(--sidebar-nav-padding, 0);
    gap: var(--sidebar-nav-gap, 0.25rem);

    /* Menu items */
    > li {
      list-style: none;
      margin: 0;
      padding: 0;

      /* Links (anchor, uix-link, button) */
      > a,
      > uix-link,
      > button {
        display: flex;
        align-items: center;
        gap: var(--sidebar-item-gap, 0.75rem);
        width: 100%;
        padding: var(--sidebar-item-padding, 0.75rem 1rem);
        border-radius: var(--sidebar-item-border-radius, 0.5rem);
        color: var(--sidebar-item-color, var(--text-muted, #6b7280));
        font-weight: var(--sidebar-item-font-weight, 500);
        font-size: var(--menu-item-font-size, inherit);
        text-decoration: none;
        background: transparent;
        border: none;
        cursor: pointer;
        text-align: left;
        transition:
          background-color 0.2s ease,
          color 0.2s ease;

        &:hover {
          background-color: var(--sidebar-item-hover-background, #f5f5f5);
          color: var(--sidebar-item-hover-color, var(--text-color, #1a1a1a));
        }

        &.active,
        &[aria-current="page"] {
          background-color: var(--sidebar-item-active-background, #000000);
          color: var(--sidebar-item-active-color, #ffffff);
          font-weight: var(--sidebar-item-active-font-weight, 600);
        }
      }
    }

    /* Divider */
    > li.divider,
    > li[role="separator"] {
      height: 0;
      padding-top: var(--sidebar-section-padding, 1rem);
      margin-top: var(--sidebar-section-margin, 0.5rem);
      border-top: 1px solid
        var(--sidebar-border-color, var(--color-border, #e5e7eb));
      background: none;
    }

    /* Accordion via <details> */
    details {
      summary {
        display: flex;
        align-items: center;
        gap: var(--sidebar-item-gap, 0.75rem);
        padding: var(--sidebar-item-padding, 0.75rem 1rem);
        border-radius: var(--sidebar-item-border-radius, 0.5rem);
        color: var(--sidebar-item-color, var(--text-muted, #6b7280));
        font-weight: var(--sidebar-item-font-weight, 500);
        cursor: pointer;
        list-style: none;
        transition:
          background-color 0.2s ease,
          color 0.2s ease;

        &::-webkit-details-marker {
          display: none;
        }

        &:hover {
          background-color: var(--sidebar-item-hover-background, #f5f5f5);
          color: var(--sidebar-item-hover-color, var(--text-color, #1a1a1a));
        }

        /* Chevron icon */
        uix-icon:last-child {
          margin-left: auto;
          transition: transform 0.2s ease;
        }
      }

      &[open] summary uix-icon:last-child {
        transform: rotate(90deg);
      }

      /* Nested list */
      > ul {
        list-style: none;
        margin: 0;
        padding: 0;
        padding-inline: var(--sidebar-item-padding, 0.25rem);
        display: flex;
        flex-direction: column;
        gap: var(--sidebar-item-gap, 0.75rem);

        > li {
          > a,
          > uix-link {
            display: flex;
            align-items: center;
            gap: var(--sidebar-item-gap, 0.75rem);
            padding: var(--sidebar-nested-item-padding, 0.5rem 1rem);
            border-radius: var(--sidebar-item-border-radius, 0.5rem);
            color: var(--sidebar-item-color, var(--text-muted, #6b7280));
            font-size: var(--sidebar-nested-item-font-size, 0.875rem);
            text-decoration: none;
            transition:
              background-color 0.2s ease,
              color 0.2s ease;

            &:hover {
              background-color: var(--sidebar-item-hover-background, #f5f5f5);
              color: var(--sidebar-item-hover-color, var(--text-color, #1a1a1a));
            }

            &.active,
            &[aria-current="page"] {
              background-color: var(--sidebar-item-hover-background, #e5e5e5);
              color: var(--sidebar-item-hover-color, #000000);
              font-weight: 600;
            }
          }
        }
      }
    }
  }
}
