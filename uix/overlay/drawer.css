/**
 * UIX Drawer Styles
 * Follows button.css gold standard pattern
 */

:where(.uix-drawer, uix-drawer) {
  /* --- 1. Layout & Core Props --- */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: var(--drawer-z-index, 1000);
  pointer-events: none;

  /* --- 2. Open State --- */
  &[open] {
    pointer-events: auto;
    display: flex;
  }

  /* --- 3. Backdrop Part --- */
  &::part(backdrop) {
    display: none;
    pointer-events: none;
  }

  &[open]::part(backdrop) {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--drawer-overlay-background, rgba(0, 0, 0, 0.6));
    backdrop-filter: var(--drawer-overlay-blur, blur(2px));
    z-index: var(--drawer-overlay-z-index, 100);
    animation: drawer-backdrop-fade-in var(--drawer-animation-duration, 0.25s) ease-out;
    cursor: pointer;
    pointer-events: auto;
  }

  /* --- 4. Panel Part --- */
  &::part(panel) {
    position: absolute;
    background-color: var(--drawer-background, var(--color-surface-light, #ffffff));
    box-shadow: var(--drawer-shadow, 0 0 30px rgba(0, 0, 0, 0.4));
    border: var(--drawer-border-width, 0) solid var(--drawer-border-color, var(--color-surface));
    z-index: var(--drawer-panel-z-index, 1001);
    overflow-y: auto;
    overflow-x: hidden;
    transition: var(
      --drawer-transition,
      transform var(--drawer-animation-duration, 0.3s) ease-in-out,
      opacity var(--drawer-animation-duration, 0.3s) ease-in-out
    );
    opacity: 0;
    pointer-events: none;
  }

  &[open]::part(panel) {
    opacity: 1;
    pointer-events: auto;
  }

  /* --- 5. Header Part --- */
  &::part(header) {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--drawer-header-padding, var(--spacing-md, 0.75rem) var(--spacing-lg, 1rem));
    border-bottom: var(--drawer-header-border-width, 1px) solid var(--drawer-header-border-color, var(--color-surface));
    background: var(--drawer-header-background, transparent);
    font-size: var(--drawer-header-font-size, var(--text-lg, 1.125rem));
    font-weight: var(--drawer-header-font-weight, var(--font-semibold, 600));
    color: var(--drawer-header-color, var(--text-color));
  }

  /* --- 6. Body Part --- */
  &::part(body) {
    flex: 1;
    padding: var(--drawer-body-padding, var(--spacing-lg, 1rem));
    overflow-y: auto;
    color: var(--drawer-body-color, var(--text-color));
  }

  /* --- 7. Footer Part --- */
  &::part(footer) {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--drawer-footer-gap, var(--spacing-sm, 0.5rem));
    padding: var(--drawer-footer-padding, var(--spacing-md, 0.75rem) var(--spacing-lg, 1rem));
    border-top: var(--drawer-footer-border-width, 1px) solid var(--drawer-footer-border-color, var(--color-surface));
    background: var(--drawer-footer-background, transparent);
  }

  /* --- 8. Position: Left (default) --- */
  &:not([position]),
  &[position="left"] {
    &::part(panel) {
      top: 0;
      left: 0;
      bottom: 0;
      width: var(--drawer-width, 280px);
      min-width: var(--drawer-min-width, min(70%, 280px));
      max-width: var(--drawer-max-width, 400px);
      height: 100%;
      transform: translateX(-100%);
      border-radius: 0 var(--drawer-border-radius, 0) var(--drawer-border-radius, 0) 0;
    }

    &[open]::part(panel) {
      transform: translateX(0);
    }
  }

  /* --- 9. Position: Right --- */
  &[position="right"] {
    &::part(panel) {
      top: 0;
      right: 0;
      bottom: 0;
      width: var(--drawer-width, 280px);
      min-width: var(--drawer-min-width, min(70%, 280px));
      max-width: var(--drawer-max-width, 400px);
      height: 100%;
      transform: translateX(100%);
      border-radius: var(--drawer-border-radius, 0) 0 0 var(--drawer-border-radius, 0);
    }

    &[open]::part(panel) {
      transform: translateX(0);
    }
  }

  /* --- 10. Position: Top --- */
  &[position="top"] {
    &::part(panel) {
      top: 0;
      left: 0;
      right: 0;
      width: 100%;
      height: var(--drawer-height, 50vh);
      min-height: var(--drawer-min-height, 200px);
      max-height: var(--drawer-max-height, 80vh);
      transform: translateY(-100%);
      border-radius: 0 0 var(--drawer-border-radius, 0) var(--drawer-border-radius, 0);
    }

    &[open]::part(panel) {
      transform: translateY(0);
    }
  }

  /* --- 11. Position: Bottom --- */
  &[position="bottom"] {
    &::part(panel) {
      bottom: 0;
      left: 0;
      right: 0;
      width: 100%;
      height: var(--drawer-height, 50vh);
      min-height: var(--drawer-min-height, 200px);
      max-height: var(--drawer-max-height, 80vh);
      transform: translateY(100%);
      border-radius: var(--drawer-border-radius, 0) var(--drawer-border-radius, 0) 0 0;
    }

    &[open]::part(panel) {
      transform: translateY(0);
    }
  }

  /* --- 12. Size Variants --- */
  &[size="sm"] {
    --drawer-width: 240px;
    --drawer-height: 30vh;
  }

  &[size="md"] {
    --drawer-width: 320px;
    --drawer-height: 50vh;
  }

  &[size="lg"] {
    --drawer-width: 400px;
    --drawer-height: 70vh;
  }

  &[size="xl"] {
    --drawer-width: 500px;
    --drawer-height: 85vh;
  }

  &[size="full"] {
    --drawer-width: 100%;
    --drawer-height: 100vh;
    --drawer-max-width: 100%;
    --drawer-max-height: 100vh;
  }
}

/* --- Animations --- */
@keyframes drawer-backdrop-fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
