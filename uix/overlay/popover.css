/**
 * UIX Popover Styles
 * Uses theme variables for consistent styling
 * Works with custom popover controller system
 */

:where(.uix-popover, uix-popover) {
  /* Base styles */
  &[data-open] {
    display: block;
    min-width: 250px;
    max-width: 400px;
    background: var(--color-surface-light, #3c3836);
    color: var(--text-color, default);
    border: 1px solid var(--color-surface, #504945);
    border-radius: var(--radius-md, 0.375rem);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
    padding: var(--spacing-md, 0.75rem);

    > * {
      margin: 0;
    }

    > * + * {
      margin-top: var(--spacing-sm, 0.5rem);
    }
  }

  /* Arrow using ::before pseudo-element */
  &[data-open][arrow]::before {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
  }

  /* Arrow positioning for bottom - arrow points UP to trigger */
  &[position="bottom"][arrow]::before,
  &[position="bottom-left"][arrow]::before,
  &[position="bottom-right"][arrow]::before {
    top: -8px;
    left: 20px;
    border-width: 0 8px 8px 8px;
    border-color: transparent transparent
      var(--color-surface-light, #3c3836) transparent;
  }

  /* Arrow border for bottom */
  &[position="bottom"][arrow]::after,
  &[position="bottom-left"][arrow]::after,
  &[position="bottom-right"][arrow]::after {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
    top: -9px;
    left: 20px;
    border-width: 0 8px 8px 8px;
    border-color: transparent transparent
      var(--color-surface, #504945) transparent;
  }

  /* Arrow positioning for top - arrow points DOWN to trigger */
  &[position="top"][arrow]::before,
  &[position="top-left"][arrow]::before,
  &[position="top-right"][arrow]::before {
    bottom: -8px;
    left: 20px;
    border-width: 8px 8px 0 8px;
    border-color: var(--color-surface-light, #3c3836) transparent
      transparent transparent;
  }

  &[position="top"][arrow]::after,
  &[position="top-left"][arrow]::after,
  &[position="top-right"][arrow]::after {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
    bottom: -9px;
    left: 20px;
    border-width: 8px 8px 0 8px;
    border-color: var(--color-surface, #504945) transparent
      transparent transparent;
  }

  /* Arrow positioning for left - arrow points RIGHT to trigger */
  &[position="left"][arrow]::before {
    right: -8px;
    top: 20px;
    border-width: 8px 0 8px 8px;
    border-color: transparent transparent transparent
      var(--color-surface-light, #3c3836);
  }

  &[position="left"][arrow]::after {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
    right: -9px;
    top: 20px;
    border-width: 8px 0 8px 8px;
    border-color: transparent transparent transparent
      var(--color-surface, #504945);
  }

  /* Arrow positioning for right - arrow points LEFT to trigger */
  &[position="right"][arrow]::before {
    left: -8px;
    top: 20px;
    border-width: 8px 8px 8px 0;
    border-color: transparent var(--color-surface-light, #3c3836)
      transparent transparent;
  }

  &[position="right"][arrow]::after {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    border-style: solid;
    left: -9px;
    top: 20px;
    border-width: 8px 8px 8px 0;
    border-color: transparent var(--color-surface, #504945)
      transparent transparent;
  }
}
